<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab7</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    
    <link rel="stylesheet" href="../public/style.css">

</head>
<body>
    <h2>To do Prototype</h2>
    <br>

    <div class = "container-fluid">
        <div class = "accordion" id = "accordionEx">
            <div class = "base">
                <div class = "accordion-item" id="loginAccordion">
                    <h2 class = "accordion-header" id = "loginHeading">
                        <button class = "accordion-button text primary" type = "button" data-bs-toggle="collapse" data-bs-target="#loginCollapse" aria-expanded="true" aria-controls="loginCollapse" >Log In</button>
                    </h2>
                
                    <div id="loginCollapse" class="accordion-collapse collapse show " aria-labelledby="loginHeading" data-bs-parent="#accordionEx">
                        <div class = "accordion-body">
                            <h1 class = "h4 text-dark">Log In</h1>
                            <form action = "/login" method ="POST">
                                
                                <label for="Email">Email address</label> <br>
                                <input type = "email" id = "Email" placeholder = "Email Address" name = "Email" >
                                <!DOCTYPE html>
                                <html lang="en">
                                <head>
                                    <meta charset="UTF-8">
                                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                    <title>Lab7</title>
                                
                                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
                                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
                                
                                    <link rel="stylesheet" href="../public/style.css">
                                
                                </head>
                                <body>
                                    <br>
                                    <h1>To Do List</h1>
                                
                                    <% if (username) { %>
                                    <br>
                                
                                    <div class="container-fluid" id="one">
                                        <div class="accordion" id="accordionEx">
                                            <div class="top">
                                                <div class="icon">
                                                    <h2 class="mb-0" id="emailHeading">
                                                        <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#emailCollapse" aria-expanded="false" aria-controls="emailCollapse">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
                                                                <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413-1.4 2.397 0 2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                                                            </svg>
                                                            Logged in as <%= username %>
                                                        </button>
                                                        <div class="collapse" id="emailCollapse" aria-labelledby="emailHeading" data-parent="#accordionEx">
                                                            <div class="card-body">
                                                                <form action="/logout" method="POST">
                                                                    <button class="btn btn-primary btn-sm">Log Out</button>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </h2>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                
                                    <div class="container-fluid" id="two">
                                        <ul class="list-group" id="added">
                                            <% tasks.forEach(function (task) { %>
                                                <% if (!task.isTaskCleared) { %>
                                                    <% if (!task.isTaskClaimed) { %>
                                                        <% if (task.state === 'unclaimed') { %>
                                                            <%- include("partials/Unclaimed.ejs", { task: task }) -%>
                                                        <% } %>
                                                    <% } %>
                                
                                                    <% if (task.claimingUser === username) { %>
                                                        <% if (task.state === 'Unfinished') { %>
                                                            <%- include("partials/Unfinished.ejs", { task: task }) -%>
                                                        <% } %>
                                                        <% if (task.state === 'finished') { %>
                                                            <%- include("partials/finished.ejs", { task: task }) -%>
                                                        <% } %>
                                                    <% } %>
                                
                                                    <% if (task.claimingUser !== username && task.isTaskClaimed && task.isTaskDone) { %>
                                                        <%- include("partials/finishedOtheruser.ejs", { task: task }) -%>
                                                    <% } %>
                                
                                                    <% if (task.claimingUser !== username && task.isTaskClaimed && !task.isTaskDone) { %>
                                                        <%- include("partials/user2unfinished.ejs", { task: task }) -%>
                                                    <% } %>
                                                <% } %>
                                            <% }) %>
                                        </ul>
                                    
                                        <form action="/addtask" method="POST">
                                            <div class="input-group mb-3">
                                                <input type="text" class="form-control border border-gray" placeholder="New Task" id="task" name="task">
                                                <input name="username" value="<%= username %>">
                                                <button type="submit" id="addButton" class="btn btn-outline-secondary">Add</button>
                                            </div>
                                        </form>
                                
                                        <form action="/purge" method="POST">
                                            <button type="submit" id="remButton" class="btn btn-outline-secondary">Remove Complete</button>
                                        </form>
                                    </div>
                                    <% } %>
                                
                                </body>
                                </html>
                                          <br>
                        
                                <label for = "Password">Password</label><br>
                                <input type = "password" id = "Password" placeholder="User Password" id = "Password" name = "Password"> 
                                <br>

                                <br>
                                <button class = "btn btn-primary btn">Log In</button>
                                <br>
                                <br>
                            </form>
                        
                        </div><!--accordion body-->
                    </div><!--long div thingy-->
                </div><!--accordion item-->
            </div><!--base-->
        

            <div class = "accordion-item" id="registerAccordion">
                <div class = "base">
                    <div class = "accordion-item" id = "registerAccordion">
                        <h2 class = "accordion-header" id = registerHeading>
                            <button class = "accordion-button text" type = "button"data-bs-toggle="collapse" data-bs-target="#registerCollapse" aria-expanded="true" aria-controls="registerCollapse">Register</button>
                        </h2>

                        <div id="registerCollapse" class="accordion-collapse collapse" aria-labelledby="registerHeading" data-bs-parent="#loginAccordion">
                            <div class = "accordion-body">
                                <h1 class  = "h4 text-dark">Sign up</h1>
                                <form action = "/register" method = "POST">
                                    <label for="EmailSign">Email address</label> <br>
                                    <input type = "email" id = "EmailSign" placeholder = "Email Address" name = "EmailSign"> <!--placeholder acts as a short hint for expected input -->
                                    <br>
                            
                                    <label for="PasswordSign">Password</label> <br>
                                    <input type = "password" id = "PasswordSign" placeholder = "Password" name = "PasswordSign">
                                    <br>
                            
                                    <label for="Authentication">Authentication</label> <br>
                                    <input type = "password" id = "Authentication" placeholder = "Authentication" name = "Authentication">
                                    <br>
                                    
                                    <br>
                                    <button class = "btn btn-primary btn">Sign Up</button>
                                </form>
                            </div>
                        </div>
                      
                    </div>
                      
                    
                    
                </div>
            </div>
            
            
        </div> <!--accord main-->
    </div><!--contianer fluid-->
 

</body>
</html>